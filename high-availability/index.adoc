---
sidebar: sidebar 
permalink: high-availability/index.html 
keywords: high availability, ha, overview 
summary: 接管是指節點接管其合作夥伴儲存設備的程序。GiveBack是將儲存設備歸還給合作夥伴的程序。 
---
= 了解 ONTAP 叢集中的 HA 對管理
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
叢集節點以高可用性 (HA) 對進行配置，以實現容錯和不間斷運行。如果某個節點發生故障，或者您需要將某個節點關閉進行例行維護，其夥伴節點可以接管其儲存空間並繼續從中提供資料。當節點恢復上線時，合作夥伴會歸還儲存空間。

HA 對控制器配置由一對相符的儲存控制器（本機節點和夥伴節點）組成。這些節點彼此之間都透過磁碟架連接。當 HA 對中的一個節點遇到錯誤並停止處理資料時，其夥伴節點會偵測到夥伴節點的故障狀態，並從該控制器接手所有資料處理。

_Takeove_是節點控制其合作夥伴儲存設備的程序。

_Giveback _是將儲存設備歸還給合作夥伴的程序。

根據預設、在下列任一情況下、移轉都會自動發生：

* 軟體或系統故障發生在導致恐慌的節點上。HA配對控制器會自動容錯移轉至其合作夥伴節點。當合作夥伴從恐慌中恢復並開機後、節點會自動執行恢復、讓合作夥伴恢復正常運作。
* 節點發生系統故障、節點無法重新開機。例如、當某個節點因停電而故障時、HA配對控制器會自動容錯移轉至其合作夥伴節點、並從存續的儲存控制器提供資料。



NOTE: 如果節點的儲存設備同時斷電、則無法進行標準接管。

* 不會從節點的合作夥伴收到活動訊息。如果合作夥伴遇到硬體或軟體故障（例如互連故障）、但並未造成恐慌、但仍無法正常運作、就可能發生這種情況。
* 您可以停止其中一個節點、而不使用 `-f` 或 `-inhibit-takeover true` 參數。



NOTE: 在啟用叢集 HA 的雙節點叢集中、使用停止或重新啟動節點 `‑inhibit‑takeover true` 參數會導致兩個節點停止提供資料、除非您先停用叢集 HA 、然後將 epsilon 指派給您要保持連線的節點。

* 您無需使用、即可重新啟動其中一個節點 `‑inhibit‑takeover true` 參數。（ `‑onboot` 的參數 `storage failover` 命令預設為啟用。）
* 遠端管理裝置（服務處理器）會偵測合作夥伴節點的故障。如果您停用硬體輔助接管、則不適用此選項。


您也可以使用手動啟動接管 `storage failover takeover` 命令。

從ONTAP 9.18.1 開始，您可以設定 HA 對節點之間的加密通訊。更多信息，請參閱link:ha-pair-encryption.html["配置ONTAP HA 流量的加密"]。



== 叢集恢復能力與診斷功能的改善

從 ONTAP 9.9.1 開始，下列恢復能力和診斷新增功能可改善叢集作業：

* * 連接埠監控與避免 * ：在雙節點無交換器叢集組態中、系統會避免發生總封包遺失（連線中斷）的連接埠。在 ONTAP 9.8.1 及更早版本中、此功能僅適用於交換式組態。
* * 自動節點容錯移轉 * ：如果節點無法透過叢集網路提供資料、則該節點不應擁有任何磁碟。反之、如果合作夥伴的健康狀況良好、則HA合作夥伴應該接管。
* * 命令來分析連線問題 * ：使用下列命令來顯示哪些叢集路徑發生封包遺失： `network interface check cluster-connectivity show`
+
如link:https://docs.netapp.com/us-en/ontap-cli/network-interface-check-cluster-connectivity-show.html["指令參考資料ONTAP"^]需詳細 `network interface check cluster-connectivity show`資訊，請參閱。


