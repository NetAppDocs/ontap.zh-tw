---
sidebar: sidebar 
permalink: smbc/considerations-limits.html 
keywords: SM-BC, SMBC, restrictions, consistency group, endpoint limits, solaris, aix, hp-ux, fanout 
summary: 使用SnapMirror營運不中斷解決方案時、還有幾項額外的限制和限制。 
---
= 考量與限制
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
使用SnapMirror營運不中斷解決方案時、需要考量幾項考量、限制和限制。



== 物件限制



=== 叢集中的一致性群組

採用SM至BC的叢集的一致性群組限制是根據關係來計算、並取決ONTAP 於使用的版本。限制與平台無關。

|===
| 版本ONTAP | 最大關係數 


| 部分9.89.9.1 ONTAP | 5. 


| 零點9.10.1 ONTAP | 20 


| 更新版本ONTAP | 50 
|===


=== 每個一致性群組的磁碟區

從0到9、9.1、每個SM到BC一致性群組關係所支援的最大磁碟區數量為12個、這是與平台無關的限制。ONTAP從ONTAP 《支援的磁碟區數》（從《支援的磁碟區數》9.10.1開始）、每個SM與BC的關係最多可支援16個磁碟區。



=== 磁碟區

SMBC中的限制是根據端點數量而非關係數量來計算。12個磁碟區的一致性群組可在來源和目的地上提供12個端點。SM與BC和SnapMirror同步關係都有助於增加端點的總數。

下表列出每個平台的最大端點數。

|===
| 美國否 | 平台 3+| SMBC的每個HA端點 3+| 每個HA的整體同步和SMBC端點 


|  |  | 部分9.89.9.1 ONTAP | 零點9.10.1 ONTAP | 更新版本ONTAP | 部分9.89.9.1 ONTAP | 零點9.10.1 ONTAP | 更新版本ONTAP 


| 1. | AFF | 60 | 200 | 400 | 80 | 200 | 400 


| 2. | ASA | 60 | 200 | 400 | 80 | 200 | 400 
|===


=== SAN物件限制

下表包含下列SAN物件限制、無論平台為何、均適用。

|===
| SMBC關係中物件的限制 | 數 


| 每個磁碟區的LUN數量 | 256 


| 每個節點的LUN對應 | 2048 


| 每個叢集的LUN對應 | 4096 


| 每個Vserver的LIF（與SMBC關係中至少有一個Volume） | 256 


| 每個節點的叢集間生命量 | 4. 


| 每個叢集的叢集間生命量 | 8. 
|===


== 支援的組態與功能

SMBC 支援多種作業系統和 ONTAP 功能、包括：

* AIX （從 ONTAP 9.11.1 開始）
* 連出組態
* HP-UX （從 ONTAP 9.10.1 開始）
* NDMP 複本（從 ONTAP 9.13.1 開始）
* 部分檔案還原（從 ONTAP 9.12.1 開始）
* Solaris 11.4 （從 ONTAP 9.10.1 開始）




=== AIX

從ONTAP 《支援》版本的《支援》（從《支援》版本的版本起）開始、《支援AIX》（SMBC）在AIX組態下、主要叢集是「作用中」叢集。

在AIX組態中、容錯移轉會中斷運作。每次容錯移轉時、您都必須在主機上執行重新掃描、才能恢復I/O作業。

若要使用SMBC設定AIX主機、請參閱知識庫文章 link:https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapMirror/How_to_configure_an_AIX_host_for_SnapMirror_Business_Continuity_(SM-BC)["如何設定AIX主機以實現SnapMirror營運不中斷（SMBC）"]。



=== HP-UX SMBC 組態的已知問題與限制

從ONTAP 功能更新至功能更新至功能更新、支援適用於HP-UX的SMBC。如果在SM至BC組態的隔離主叢集上發生自動非計畫性容錯移轉（AUFO）事件、則在HP-UX主機上恢復I/O可能需要120秒以上的時間。視執行的應用程式而定、這可能不會導致任何I/O中斷或錯誤訊息。如果隔離的主叢集發生AUFO事件、您必須重新啟動HP-UX主機上的應用程式、使其中斷容錯能力低於120秒。

當主要與次要叢集之間的連線中斷、且主要叢集與中介器之間的連線中斷時、隔離的主要叢集上的AUFO事件可能會導致雙事件故障。這是罕見的事件、與其他AUFO事件不同。



=== FabricPool

SM-BC 支援 FabricPool 上的來源和目的地磁碟區、其分層原則為「無」、「快照」或「自動」。SM-S SM-BC 不支援使用「全部」分層原則的 FabricPool 集合體。



=== 連出組態

SM - BC支援 xref:../data-protection/supported-deployment-config-concept.html[連出組態] 使用 `MirrorAllSnapshots` 原則、從 ONTAP 9.11.1 開始 `MirrorAndVault` 原則。搭配的SM至BC不支援連出組態 `XDPDefault` 原則。

如果在扇出組態的SM至BC目的地上發生容錯移轉、您必須手動進行 xref:resume-protection-fan-out-configuration.html[在連出組態中恢復保護]。



=== NDMP 還原

從 ONTAP 9.13.1 開始、您可以使用 NDMP 複製及還原 SMBC 的資料。使用 NDMP 可讓您將資料移至 SM-BC 來源、以完成還原而不需暫停保護。這在扇出組態中特別有用。

若要深入瞭解此程序、請參閱 xref:../tape-backup/transfer-data-ndmpcopy-task.html[使用 NDMP 複本傳輸資料]。



=== 部分檔案還原

從《支援部分LUN還原的ONTAP 功能（從《支援部分LUN還原功能的功能（《支援SMBC Volume：如需此程序的相關資訊、請參閱 link:../data-protection/restore-part-file-snapshot-task.html["從Snapshot複本還原部分檔案"]。



=== 建議使用適用於SM至BC組態的Solaris主機設定

從功能支援的版本起、SM-BC支援Solaris 11.4。ONTAP為了確保在SM至BC環境中發生非計畫性站台容錯移轉切換時、Solaris用戶端應用程式不會中斷營運、您必須使用「f_tpgs」參數來設定Solaris 11.4主機。

請依照下列步驟設定置換參數：

. 建立組態檔「/etc/driver/drv/scsi_vhc.conf（包含與主機所連接之NetApp儲存類型類似的項目）：
+
[listing]
----
scsi-vhci-failover-override =
"NETAPP  LUN","f_tpgs"
----
. 使用"devprop"和"mdb"命令來驗證是否已成功套用覆寫：
+
[listing]
----
root@host-A:~# devprop -v -n /scsi_vhci scsi-vhci-failover-override scsi-vhci-failover-override=NETAPP  LUN + f_tpgs
root@host-A:~# echo "*scsi_vhci_dip::print -x struct dev_info devi_child | ::list struct dev_info devi_sibling| ::print struct dev_info devi_mdi_client| ::print mdi_client_t ct_vprivate| ::print struct scsi_vhci_lun svl_lun_wwn svl_fops_name"| mdb -k`
----
+
[listing]
----
svl_lun_wwn = 0xa002a1c8960 "600a098038313477543f524539787938"
svl_fops_name = 0xa00298d69e0 "conf f_tpgs"
----



NOTE: 套用「shcsciv-vhci容錯移轉置換」時、「conf」會新增至「vl_fOPs_name」。如需更多資訊及預設設定的建議變更、請參閱NetApp知識庫文章 https://["Solaris主機支援SnapMirror營運不中斷（SMBC）組態中的建議設定"]。
