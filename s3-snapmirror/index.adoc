---
sidebar: sidebar 
permalink: s3-snapmirror/index.html 
keywords: s3 snapmirror buckets, snapmirror buckets SVM, s3 snapmirror data protection, hybrid cloud bundle, s3 snapmirror relationship, VM peering, cluster and storage VM peering, Fan-in deployments, data protection, s3 snapmirror policy, peering 
summary: 從S59.10.1開始ONTAP 、ONTAP 您可以使用熟悉的SnapMirror鏡射與備份功能、來保護位於S3物件儲存區的貯體。 
---
= S3 SnapMirror總覽
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
從 ONTAP 9.10.1 開始、您可以使用 SnapMirror 鏡射和備份功能、保護 ONTAP S3 物件儲存區中的貯體。與標準 SnapMirror 不同的是、 S3 SnapMirror 可將鏡像和備份複製到 AWS S3 等非 NetApp 目的地。

S3 SnapMirror支援從ONTAP Sirs3儲存庫到下列目的地的主動鏡像和備份層：

[cols="50,25,25"]
|===
| 目標 | 支援作用中鏡像和接管？ | 支援備份與還原？ 


 a| 
SS3 ONTAP

* 相同SVM中的儲存區
* 位於同一個叢集上不同SVM中的儲存區
* 不同叢集上的SVM儲存區

| 是的 | 是的 


| StorageGRID | 否 | 是的 


| AWS S3 | 否 | 是的 


| 適用於 Azure Cloud Volumes ONTAP | 是的 | 是的 


| AWS 適用的 Cloud Volumes ONTAP | 是的 | 是的 


| 適用於 Google Cloud Cloud Volumes ONTAP | 是的 | 是的 
|===
您可以保護ONTAP 現有的SS3伺服器庫位、也可以立即啟用資料保護功能、建立新的庫位。



== S3 SnapMirror需求

* 版本ONTAP
+
ONTAP 9.10.1 或更新版本必須在來源叢集和目的地叢集上執行。

* 授權
+
中提供下列授權 link:../system-admin/manage-licenses-concept.html["ONTAP One"] ONTAP 來源和目的地系統需要軟體套件、才能提供下列存取：

+
** ONTAP S3 傳輸協定與儲存設備
** S3 SnapMirror 鎖定其他 NetApp 物件儲存目標（ ONTAP S3 、 StorageGRID 和 Cloud Volumes ONTAP ）
** S3 SnapMirror 以協力廠商物件儲存區為目標、包括 AWS S3 （在中提供 link:../data-protection/install-snapmirror-cloud-license-task.html["ONTAP One 相容性套件"]）


* SS3 ONTAP
+
** SS3伺服器必須執行來源和目的地SVM。ONTAP
** 建議但不需要在裝載S3伺服器的系統上安裝TLS存取的CA憑證。
+
*** 用於簽署 S3 伺服器憑證的 CA 憑證必須安裝在主控 S3 伺服器之叢集的管理儲存 VM 上。
*** 您可以使用自我簽署的CA憑證或外部CA廠商所簽署的憑證。
*** 如果來源或目的地儲存VM未使用HTTPS接聽、則不需要安裝CA憑證。




* 對等（ONTAP 適用於S3目標）
+
** 必須設定叢集間的生命體（用於遠端 ONTAP 目標）、來源叢集和目的地叢集的叢集間生命體可連線至來源和目的地 S3 伺服器資料生命體。
** 來源和目的地叢集會被處理（用於遠端ONTAP 的不確定目標）。
** 來源和目的地儲存VM都會被處理（適用於所有ONTAP 的物件）。


* SnapMirror原則
+
** 所有S3 SnapMirror關係都需要S3專屬的SnapMirror原則、但您可以針對多個關係使用相同的原則。
** 您可以建立自己的原則或接受預設的*連續*原則、其中包含下列值：
+
*** 節流（處理量/頻寬上限）-無限。
*** 恢復點目標時間：1小時（3、600秒）。







NOTE: 請注意、當兩個 S3 儲存區處於 SnapMirror 關係中時、如果設定了生命週期原則、使物件的目前版本過期（刪除）、則會將相同的動作複寫到合作夥伴儲存區。即使合作夥伴儲存庫為唯讀或被動式、也會發生這種情況。

* root 使用者金鑰
S3 SnapMirror 關係需要儲存 VM 根使用者存取金鑰； ONTAP 預設不會指派。第一次建立S3 SnapMirror關係時、您必須確認來源與目的地儲存VM上是否存在金鑰、如果沒有、則重新產生金鑰。如果您需要重新產生這些金鑰、您必須確保使用存取和秘密金鑰配對的所有用戶端和SnapMirror物件儲存組態、都會以新的金鑰更新。


如需S3伺服器組態的相關資訊、請參閱下列主題：

* link:../task_object_provision_enable_s3_server.html["在儲存VM上啟用S3伺服器"]
* link:../s3-config/index.html["關於S3組態程序"]


如需叢集與儲存VM對等關係的相關資訊、請參閱下列主題：

* link:../task_dp_prepare_mirror.html["準備鏡射與保存（System Manager、步驟1至6）"]
* link:../peering/index.html["叢集與SVM對等（CLI）"]




== 支援的 SnapMirror 關係

S3 SnapMirror支援連出和串聯關係。如需概觀、請參閱 link:../data-protection/supported-deployment-config-concept.html["橫向和串聯資料保護部署"]。

S3 SnapMirror 不支援採用風扇部署（多個來源貯體和單一目的地貯體之間的資料保護關係）。S3 SnapMirror可支援從多個叢集到單一次要叢集的多個儲存區鏡像、但每個來源儲存區都必須在次要叢集上擁有自己的目的地儲存區。



== 控制對 S3 儲存區的存取

建立新的儲存庫時、您可以建立使用者和群組來控制存取。如需詳細資訊、請參閱下列主題：

* link:../task_object_provision_add_s3_users_groups.html["新增S3使用者和群組（系統管理員）"]
* link:../s3-config/create-s3-user-task.html["建立S3使用者（CLI）"]
* link:../s3-config/create-modify-groups-task.html["建立或修改S3群組（CLI）"]

