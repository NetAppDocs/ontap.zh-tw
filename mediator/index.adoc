---
permalink: mediator/index.html 
sidebar: sidebar 
keywords: ontap mediator, install requirements, mediator requirements 
summary: 若要安裝 ONTAP Mediator，您必須確保滿足所有先決條件、取得安裝套件並在主機上執行安裝程式。 
---
= 安裝或升級ONTAP Mediator
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
要安裝或升級ONTAP Mediator，您需要滿足所有先決條件，下載安裝包，並在主機上執行安裝程式。

* 從 ONTAP 9.8 開始、您可以使用任何版本的 ONTAP Mediator 來監控 SnapMirror 主動式同步關係。
* 您可以使用任何版本的ONTAP Mediator 來監控MetroCluster IP 設定。




== 安裝與升級考量

在升級或安裝ONTAP Mediator 之前，請先查看以下幾點。


NOTE: ONTAP Mediator 1.8 及更早版本與 Red Hat Enterprise Linux (RHEL) FIPS 模式不相容，導致無法成功安裝。您可以使用以下命令檢查是否啟用了 FIPS 模式： `fips-mode-setup --check`命令。您可以使用以下方法停用 FIPS 模式： `fips-modesetup --disable`命令。停用 FIPS 模式後重新啟動以成功安裝ONTAP Mediator 1.8 或更早版本。

* 您應該將ONTAP Mediator 升級到最新版本。舊版仍然可以與所有ONTAP版本相容，但新版本包含針對第三方元件的安全性修補程式。
* 當您升級至新的 ONTAP Mediator 版本時，除非有更高版本，否則安裝程式會自動升級至建議的 SCST 版本。如需手動安裝較高 SCST 版本的說明，請參閱link:manage-task.html["管理 ONTAP Mediator"]。如需支援的版本，請參閱link:whats-new-concept.html#scst-support-matrix["SCST 支援對照表"]。


[NOTE]
====
* 如果安裝失敗，您可能需要升級至更新版本的ONTAP Mediator。
* 自 2025 年 6 月 15 日起，您無法安裝或升級ONTAP Mediator 1.9 和 1.8，因為它們的代碼簽署憑證已過期。如果安裝或升級失敗，請改用ONTAP Mediator 1.9.1 修補程式版本。


====
* 如果您安裝 `yum-utils` 套件中、您可以使用 `needs-restarting` 命令。
* 從ONTAP Mediator 1.11 開始，支援 MCCIP 的 IPv6。




=== 主機需求

安裝 RHEL 或 Rocky Linux 並配置相關儲存庫時，請遵循這些要求。

[NOTE]
====
如果您修改安裝或組態程序，可能需要執行其他步驟。

====
.Linux 發佈要求
* 按照紅帽最佳實務安裝 RHEL 或 Rocky Linux。由於 CentOS 8.x 已停止維護，因此不建議使用與 CentOS 8.x 相容的版本。
* 安裝 ONTAP Mediator 時，請確保系統可以存取所需的儲存庫，以便安裝程式可以擷取並安裝所有必要的軟體相依性。
* 若要讓 yum 安裝程式在 RHEL 儲存庫中尋找相關軟體，請在安裝期間或之後使用有效的 Red Hat 訂閱來登錄系統。
+
[NOTE]
====
如需詳細資訊，請參閱 Red Hat Subscription Manager 文件。

====


.網路需求
請確定下列連接埠可供 ONTAP Mediator 使用且未使用：

|===


| 連接埠/服務 | 來源 | 方向 | 目的地 | 目的 


 a| 
22/TCP
 a| 
管理主機
 a| 
傳入
 a| 
資訊媒體ONTAP
 a| 
（選用） SSH / ONTAP Mediator 管理



 a| 
31784/TCP
 a| 
叢集管理生命
 a| 
傳入
 a| 
資訊媒體伺服器ONTAP
 a| 
（必填） REST API （ HTTPS ）



 a| 
3260/TCP ^1^
 a| 
節點資料生命或節點管理生命
 a| 
雙向
 a| 
支援iSCSI目標ONTAP
 a| 
（ MCCIP 所需）用於信箱的 iSCSI 資料連線

|===
對於 SMBC 客戶， ONTAP 不需要啟用或連線連接埠 3260 。

* 如果使用第三方防火牆，請參閱link:https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html#firewall-requirements-for-ontap-mediator["防火牆需求ONTAP"^]。
* 對於無法存取網際網路的 Linux 主機，請確定所需的套件可在本機儲存庫中使用。
+
如果您在 Linux 環境中使用鏈路聚合控制協議（ LACP ），請配置內核並將設置 `sysctl net.ipv4.conf.all.arp_ignore`爲 `2`。



.作業系統需求
您的作業系統必須符合下列需求：

* 64位元實體安裝或虛擬機器
* 8 GB RAM
* 1 GB 磁碟空間（用於應用程式安裝、伺服器記錄檔和資料庫）
* 使用者：root存取權


下表顯示每個版本的 ONTAP Mediator 所支援的作業系統。

[cols="30,70"]
|===


| ONTAP Mediator 版本 | 支援的Linux版本 


 a| 
1.11
 a| 
* Red Hat Enterprise Linux
+
** 相容：9.5 ^1^
** 推薦：10.1、10.0、9.7、9.6、9.4 和 8.10


* Rocky Linux 10.1、9.7 和 8.10
* Oracle Linux 10.0 和 9.6




 a| 
1.10
 a| 
* Red Hat Enterprise Linux
+
** 相容：9.5 ^1^
** 建議：10.0、9.6、9.4 和 8.10


* Rocky Linux 10.0、9.6 和 8.10




 a| 
1.9.1
 a| 
* Red Hat Enterprise Linux
+
** 相容：9.3、9.1、8.9、8.7、8.6、8.5 和 8.4 ^1^
** 推薦：9.5、9.4、9.2、9.0、8.10 和 8.8


* Rocky Linux 9.5 和 8.10




 a| 
1.9
 a| 
* Red Hat Enterprise Linux
+
** 相容：9.3、9.1、8.9、8.7、8.6、8.5 和 8.4 ^1^
** 推薦：9.5、9.4、9.2、9.0、8.10 和 8.8


* Rocky Linux 9.5 和 8.10




 a| 
1.8
 a| 
* 紅帽企業 Linux：
+
** 相容：8.7、8.6、8.5 和 8.4 ^1^
** 推薦：9.4、9.3、9.2、9.1、9.0、8.10、8.9 和 8.8


* Rocky Linux 9.4 和 8.10




 a| 
1.1.7
 a| 
* 紅帽企業 Linux：
+
** 相容：8.7、8.6、8.5 和 8.4 ^1^
** 推薦：9.3、9.2、9.1、9.0、8.9 和 8.8


* Rocky Linux 9.3 和 8.9




 a| 
1.6.
 a| 
* 紅帽企業 Linux：
+
** 相容：8.7、8.6、8.5 和 8.4 ^1^
** 建議：9.2、9.1、9.0 和 8.8


* Rocky Linux 9.2 和 8.8




 a| 
1.5.
 a| 
* Red Hat Enterprise Linux：8.5、8.4、8.3、8.2、8.1、8.0、7.9、7.8、7.7 與 7.6
* CentOS：7.9、7.8、7.7 和 7.6




 a| 
1.4.
 a| 
* Red Hat Enterprise Linux：8.5、8.4、8.3、8.2、8.1、8.0、7.9、7.8、7.7 與 7.6
* CentOS：7.9、7.8、7.7 和 7.6




 a| 
1.3.
 a| 
* Red Hat Enterprise Linux：8.3、8.2、8.1、8.0、7.9、7.8、7.7 與 7.6
* CentOS：7.9、7.8、7.7 和 7.6




 a| 
1.2.
 a| 
* Red Hat Enterprise Linux：8.1、8.0、7.9、7.8、7.7 與 7.6
* CentOS：7.9、7.8、7.7 和 7.6


|===
. 相容意味著 Red Hat 不再支援這些 RHEL 版本，但仍可在這些版本上安裝ONTAP Mediator。


.作業系統所需的套件
ONTAP 調解器需要以下軟體包：


NOTE: 這些套件是由 ONTAP Mediator 安裝程式預先安裝或自動安裝。

[cols="25,25,25,25"]
|===


| 所有RHEL/CentOS版本 | RHEL 10.x / Rocky Linux 10 的附加軟體包 | RHEL 9.x / Rocky Linux 9 的其他套件 | 適用於 RHEL 8.x / Rocky Linux 8 的其他套件 


 a| 
* OpenSSL
* OpenSSL
* kernel-devel-$ （ uname -r ）
* 海灣合作委員會
* 製造
* libselinux-utils
* 修補程式
* bzip2.
* Perl-Data-Dumper
* Perl-ExtUtils-MakeMaker..
* efibootmgr
* mokutil

 a| 
* python3.12
* python3.12-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python公用程式
* python3.
* python3-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python公用程式
* RedHat-lsb核心
* python39.
* python39-devel


|===
該媒體夾安裝套件是一個自我解壓縮的tar檔案、其中包括：

* 一種RPM檔案、內含無法從支援版本儲存庫取得的所有相依性。
* 安裝指令碼。


建議使用有效的SSL憑證。



=== 作業系統升級考量與核心相容性

* 您可以更新除核心之外的所有函式庫軟體包，但您可能需要重新啟動才能使ONTAP Mediator 中的變更生效。如果需要重啟，請安排停機時間。
* 你應該保持作業系統核心處於最新狀態。將核心核心升級到清單中列出的支援版本。link:whats-new-concept.html#scst-support-matrix["ONTAP Mediator 版本對照表"] 。您必須重新啟動系統，因此請為此停機維護安排一個時段。
+
** 重啟前卸載 SCST 核心模組，重啟後再重新安裝。
** 在開始核心作業系統升級之前，請準備好受支援的 SCST 版本進行重新安裝。




[NOTE]
====
* 核心版本必須符合作業系統版本。
* 請勿將核心升級至ONTAP Mediator 版本支援的作業系統版本以上，因為測試過的 SCST 模組可能無法正常運作。


====


== 啟用 UEFI 安全開機時，請安裝 ONTAP Mediator

ONTAP Mediator 可以安裝在啟用或不啟用 UEFI 安全開機的系統上。

.關於這項工作
如果不需要 UEFI 安全開機，或者您正在疑難排解 ONTAP Mediator 安裝問題，您可以選擇在安裝 ONTAP Mediator 之前先停用 UEFI 安全開機。從您的機器設定停用 UEFI 安全開機選項。

[NOTE]
====
如需停用 UEFI 安全開機的詳細指示，請參閱主機作業系統的文件。

====
若要安裝啟用了 UEFI 安全啟動的 ONTAP Mediator，您必須先註冊安全金鑰，然後服務才能啟動。金鑰是在 SCST 安裝的編譯步驟期間產生，並儲存為您機器上的私密公開金鑰配對。使用 `mokutil`公用程式將公開金鑰新增為電腦擁有者金鑰（ Mok ）至 UEFI 韌體，讓系統信任並載入簽署的模組。請將複雜密碼儲存 `mokutil`在安全的位置，因為重新啟動系統以啟動莫克語時，需要這樣做。

.步驟
. [[step 1 _UEFI] 檢查系統上是否已啟用 UEFI 安全開機：
+
`mokutil --sb-state`

+
結果會指出此系統上是否已啟用 UEFI 安全開機。

+
[cols="40,60"]
|===


| 如果... | 前往... 


 a| 
已啟用 UEFI 安全開機
 a| 




 a| 
停用 UEFI 安全開機
 a| 
link:upgrade-host-os-mediator-task.html["升級主機作業系統，然後升級 ONTAP Mediator"]

|===
+
[NOTE]
====
** 系統會提示您建立必須儲存在安全位置的複雜密碼。您需要使用此密碼來啟用 UEFI Boot Manager 中的金鑰。
** ONTAP Mediator 1.2.0 及更早版本不支援此模式。


====
. [[state_2_UEFI]] 如果 `mokutil`未安裝公用程式，請執行下列命令：
+
`yum install mokutil`


