---
sidebar: sidebar 
permalink: networking/example_of_using_ipspaces.html 
keywords: example, sample, ipspace, example of using ipspaces, sample using ipspaces, hosts.equiv 
summary: 使用IPspaces的範例 
---
= 使用IPspaces的範例
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
使用IPspaces的常見應用程式、是儲存服務供應商（SSP）需要將公司A和B的客戶連接ONTAP 到SSP內部部署上的一個支援叢集、而兩家公司都使用相同的私有IP位址範圍。

SSP會在叢集上為每位客戶建立SVM、並提供從兩個SVM到公司A網路的專用網路路徑、以及從其他兩個SVM到公司B網路的專用網路路徑。

下圖顯示這種部署類型、如果兩家公司都使用非私有IP位址範圍、就能正常運作。不過、圖例顯示兩家公司使用相同的私有IP位址範圍、這會造成問題。

image:ontap_nm_image9.jpeg["IPSpace範例"]

兩家公司都使用私有IP位址子網路10.0.0.0、造成下列問題：

* 如果兩家公司決定為其各自的SVM使用相同的IP位址、則位於SSP位置之叢集中的SVM會有衝突的IP位址。
* 即使兩家公司同意使用不同的IP位址來處理SVM、也可能發生問題。
* 例如，如果網路中的任何用戶端與B網路中的用戶端具有相同的IP位址，則發往A位址空間中用戶端的封包可能會路由傳送到B位址空間中的用戶端，反之亦然。
* 如果兩家公司決定使用互不相容的位址空間（例如、A使用10.0.0.0、網路遮罩為255.128.0.0、B使用10.128.0.0、網路遮罩為255.128.8.0）、 SSP需要在叢集上設定靜態路由、以便將流量適當路由傳送到A和B的網路。
* 此解決方案既不可擴充（因為靜態路由）、也不安全（廣播流量會傳送至叢集的所有介面）。為了克服這些問題、SSP會在叢集上定義兩個IPspace、每個公司一個。由於不路由跨IP空間的流量、因此即使所有SVM都設定在10.0.0.0位址空間中、每家公司的資料仍會安全地路由至其各自的網路、如下圖所示：


image:ontap_nm_image10.jpeg["IPSpace範例"]

此外、各種組態檔案（例如）所參照的 IP 位址 `/etc/ hosts` 檔案 `/etc/hosts.equiv` 檔案、和 `the /etc/rc` 檔案、與該 IPspace 相關。因此、IPspaces可讓SSP針對多個SVM的組態和驗證資料、設定相同的IP位址、而不會發生衝突。
